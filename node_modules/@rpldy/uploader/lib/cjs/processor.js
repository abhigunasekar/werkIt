"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _queue = _interopRequireDefault(require("./queue"));

var _batchItemsSender = _interopRequireDefault(require("./batchItemsSender"));

var _batch = _interopRequireDefault(require("./batch"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _default = function _default(trigger, cancellable, options, uploaderId) {
  var sender = (0, _batchItemsSender["default"])(),
      queue = (0, _queue["default"])(options, trigger, cancellable, sender, uploaderId);
  var runCancellable = queue.runCancellable;
  return {
    process: function process(batch, batchOptions) {
      queue.uploadBatch(batch, batchOptions);
    },
    abortBatch: function abortBatch(batchId) {
      queue.abortBatch(batchId);
    },
    abort: function abort(id) {
      if (id) {
        queue.abortItem(id);
      } else {
        queue.abortAll();
      }
    },
    addNewBatch: function addNewBatch(files, uploaderId, processOptions) {
      var batch = (0, _batch["default"])(files, uploaderId, processOptions);
      return queue.addBatch(batch, processOptions);
    },
    runCancellable: runCancellable,
    clearPendingBatches: function clearPendingBatches() {
      queue.clearPendingBatches();
    },
    processPendingBatches: function processPendingBatches(uploadOptions) {
      queue.uploadPendingBatches(uploadOptions);
    }
  };
};

exports["default"] = _default;